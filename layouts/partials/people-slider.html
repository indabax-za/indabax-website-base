{{/*  allow params to be passed and the context normally in "." will be "context"  */}}
{{$context := default . .context}} 
{{/*  allowed params  */}}

{{ $show_all := default false site.Data.homepage.faculty.show_all}}
{{ $show_all = default $show_all .show_all }}
{{ $slider := default true site.Data.homepage.faculty.slider}}
{{ $slider = default $slider .show_all }}

{{/*  template  */}}
{{ with $context}}
  {{/* Find latest year */}}
  {{ $max_year := 0 }}
  {{ $all_cats := slice}}
  {{ range .item }}
    {{ range .years }}
      {{$all_cats = $all_cats | append .}}
      {{ if gt . $max_year}}
        {{ $max_year = . }}
      {{ end }}
    {{ end }}
  {{ end }}
  {{ $select_years := (slice $max_year) }}
  {{/*  select only unique cats  */}}
  {{ $all_cats = $all_cats | uniq }}

  <!--  determine if to use a slider -->
  {{ $faculty_slider_disable := "" }}
  {{ if (or (not $slider) (lt (len .item) 12))}}
    {{$faculty_slider_disable = "-disable flex-wrap"}}

  {{ end }}
  <!-- /end slider determination-->
  <div class="faculty-logo-slider{{$faculty_slider_disable}} d-flex align-items-center justify-content-center">
    
    {{ range .item }}
      {{ $is_current := (or $show_all (intersect $select_years .years) )}}
      {{ if $is_current}}
        {{partial "people-person" (dict "context" . "tracks" site.Data.faculty.tracks "badges" site.Data.faculty.badges) }}
        {{ end }}
    {{ end }}
  </div>

{{ end }}